<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HCMUT GPA Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .glass-morphism {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(229, 231, 235, 0.5);
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        
        .sort-header { cursor: pointer; user-select: none; transition: background 0.2s; }
        .sort-header:hover { background-color: #f1f5f9; }
        .sort-icon { display: inline-block; width: 12px; height: 12px; margin-left: 4px; vertical-align: middle; }

        /* Toggle Switch Style */
        .dot { transition: all 0.3s ease-in-out; }
        input:checked ~ .dot { transform: translateX(100%); background-color: #10b981; }
        input:checked ~ .block { background-color: #d1fae5; }

        /* Page chrome */
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding-top: 60px;
        }
        .page-main {
            flex: 1 0 auto;
        }
    </style>
</head>
<body class="bg-slate-50 antialiased">
    <div id="header-placeholder"></div>
    
    <main class="page-main">
    <div class="max-w-7xl mx-auto px-4 pt-8">
        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">HCMUT GPA Analyzer</h1>
            <p class="text-slate-600">Phân tích bảng điểm MyBK & Quản lý kế hoạch học tập</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            
            <!-- Left Panel: Input & Controls -->
            <div class="lg:col-span-4 space-y-6">
                
                <!-- Section 1: Raw Input -->
                <div class="glass-morphism p-6 rounded-2xl shadow-sm border border-slate-200">
                    <div class="flex items-center justify-between mb-3">
                        <label class="text-sm font-semibold text-slate-700">1. Dán bảng điểm MyBK</label>
                        <button id="btnClearRaw" class="text-xs text-red-500 hover:underline">Xóa ô dán</button>
                    </div>
                    <textarea 
                        id="rawInput" 
                        class="w-full h-32 p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none text-xs font-mono"
                        placeholder="Dán nội dung từ MyBK vào đây..."
                    ></textarea>
                    <button id="btnProcess" class="w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl transition-all shadow-md active:scale-95">
                        Phân tích lại từ đầu
                    </button>
                    <p class="text-[10px] text-slate-400 mt-2 italic text-center">* Nhấn nút này sẽ xóa dữ liệu cũ trong bảng.</p>
                </div>

                <!-- Section 2: Manual Add -->
                <div class="glass-morphism p-6 rounded-2xl shadow-sm border border-slate-200">
                    <label class="block text-sm font-semibold text-slate-700 mb-4">2. Thêm môn học dự kiến</label>
                    <div class="space-y-3">
                        <input type="text" id="manualName" placeholder="Tên môn học (để trống sẽ là temp#)" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-emerald-500">
                        <div class="grid grid-cols-2 gap-3">
                            <input type="number" id="manualCredits" placeholder="Tín chỉ" class="p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-emerald-500">
                            <input type="number" step="0.1" id="manualScore" placeholder="Điểm hệ 10" class="p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <button id="btnAddManual" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 rounded-xl transition-all shadow-md active:scale-95">
                            Thêm vào danh sách
                        </button>
                    </div>
                </div>

                <!-- Control Toggles -->
                <div class="glass-morphism p-6 rounded-2xl shadow-sm border border-slate-200">
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-semibold text-slate-700">Chế độ chỉnh sửa bảng</span>
                        <label for="toggleEdit" class="flex items-center cursor-pointer">
                            <div class="relative">
                                <input type="checkbox" id="toggleEdit" class="sr-only">
                                <div class="block bg-slate-200 w-10 h-6 rounded-full"></div>
                                <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition shadow-sm"></div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Summary Info -->
                <div class="bg-blue-50 border border-blue-100 p-5 rounded-2xl">
                    <h3 class="font-bold text-blue-800 text-sm mb-2 flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>
                        Lưu ý
                    </h3>
                    <ul class="text-[11px] text-blue-700 space-y-2 list-disc pl-4">
                        <li>Nút <b>Phân tích</b> sẽ reset toàn bộ bảng để tránh dán đè dữ liệu cũ.</li>
                        <li>Sử dụng cột checkbox để <b>Xóa nhiều</b> môn cùng lúc.</li>
                    </ul>
                </div>
            </div>

            <!-- Right Panel: Results -->
            <div class="lg:col-span-8 space-y-6">
                <!-- Summary Display -->
                <div id="summarySection" class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="glass-morphism p-4 rounded-2xl shadow-sm border-t-4 border-indigo-500">
                        <p class="text-[10px] font-medium text-slate-500 uppercase tracking-wider">Tín chỉ tích lũy</p>
                        <p id="totalEarned" class="text-2xl font-bold text-slate-800 mt-1">0</p>
                    </div>
                    <div class="glass-morphism p-4 rounded-2xl shadow-sm border-t-4 border-blue-500">
                        <p class="text-[10px] font-medium text-slate-500 uppercase tracking-wider">Tín chỉ tính GPA</p>
                        <p id="totalCreditsGPA" class="text-2xl font-bold text-slate-800 mt-1">0</p>
                    </div>
                    <div class="glass-morphism p-4 rounded-2xl shadow-sm border-t-4 border-emerald-500">
                        <p class="text-[10px] font-medium text-slate-500 uppercase tracking-wider">GPA Hệ 4.0</p>
                        <p id="gpa4" class="text-2xl font-bold text-emerald-600 mt-1">0.00</p>
                    </div>
                    <div class="glass-morphism p-4 rounded-2xl shadow-sm border-t-4 border-orange-500">
                        <p class="text-[10px] font-medium text-slate-500 uppercase tracking-wider">GPA Hệ 10</p>
                        <p id="gpa10" class="text-2xl font-bold text-orange-600 mt-1">0.00</p>
                    </div>
                </div>

                <!-- Data Table Control -->
                <div class="flex justify-between items-center px-2">
                    <div id="bulkActions" class="flex gap-2 invisible">
                        <button id="btnDeleteSelected" class="flex items-center text-xs bg-red-50 text-red-600 border border-red-200 px-4 py-2 rounded-lg hover:bg-red-100 transition-all font-semibold shadow-sm">
                            <svg class="w-3.5 h-3.5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                            Xoá mục đã chọn (<span id="selectedCount">0</span>)
                        </button>
                    </div>
                    <button id="btnExportCSV" class="flex items-center text-xs bg-white border border-slate-200 px-4 py-2 rounded-lg hover:bg-slate-50 transition-all font-medium text-slate-600 shadow-sm">
                        <svg class="w-3.5 h-3.5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        Xuất CSV (.csv)
                    </button>
                </div>

                <!-- Data Table -->
                <div class="glass-morphism rounded-2xl shadow-sm overflow-hidden border border-slate-200">
                    <div class="max-h-[600px] overflow-y-auto custom-scrollbar">
                        <table class="w-full text-left text-sm border-collapse" id="mainTable">
                            <thead class="sticky top-0 bg-slate-100 text-slate-600 font-semibold uppercase text-xs z-10 shadow-sm">
                                <tr>
                                    <th class="px-4 py-4 w-10 text-center">
                                        <input type="checkbox" id="selectAll" class="rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                                    </th>
                                    <th class="px-4 py-4 sort-header" onclick="toggleSort('name')">
                                        Môn học <span id="icon-name" class="sort-icon text-[10px]">↕</span>
                                    </th>
                                    <th class="px-2 py-4 text-center sort-header" onclick="toggleSort('credits')">
                                        TC <span id="icon-credits" class="sort-icon text-[10px]">↕</span>
                                    </th>
                                    <th class="px-2 py-4 text-center sort-header" onclick="toggleSort('score10')">
                                        Hệ 10 <span id="icon-score10" class="sort-icon text-[10px]">↕</span>
                                    </th>
                                    <th class="px-2 py-4 text-center sort-header" onclick="toggleSort('score4')">
                                        Hệ 4 <span id="icon-score4" class="sort-icon text-[10px]">↕</span>
                                    </th>
                                    <th class="px-4 py-4 text-center">Xoá</th>
                                </tr>
                            </thead>
                            <tbody id="resultBody" class="divide-y divide-slate-100 bg-white text-xs">
                                <tr>
                                    <td colspan="6" class="px-6 py-12 text-center text-slate-400 italic text-sm">Chưa có dữ liệu học tập</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // State management
        let extractedCourses = [];
        let manualCourses = [];
        let selectedIds = new Set();
        let currentSort = { column: null, direction: 'asc' };
        let tempCounter = 1;
        let isEditMode = false;

        const gradeMap = {
            'A+': 4.0, 'A': 4.0, 'B+': 3.5, 'B': 3.0,
            'C+': 2.5, 'C': 2.0, 'D+': 1.5, 'D': 1.0, 'F': 0.0
        };

        function getGradeLetter(score10) {
            if (score10 > 10) return null;
            if (score10 >= 8.5) return 'A';
            if (score10 >= 8.0) return 'B+';
            if (score10 >= 7.0) return 'B';
            if (score10 >= 6.5) return 'C+';
            if (score10 >= 5.5) return 'C';
            if (score10 >= 5.0) return 'D+';
            if (score10 >= 4.0) return 'D';
            return 'F';
        }

        function calculateScore4(score10, letter) {
            if (letter && gradeMap[letter] !== undefined) return gradeMap[letter];
            if (score10 === null || score10 > 10) return null;
            const derivedLetter = getGradeLetter(score10);
            return gradeMap[derivedLetter] ?? null;
        }

        function parseMyBKData(text) {
            const courses = [];
            const rowPattern = /(\d+)\s*[A-Z0-9_]{5,}\s*(.+?)\s*(\d+(?:\.\d+)?|DT|MT)\s+([A-F][+]?|DT|MT)\s+(\d+)/g;
            
            let match;
            while ((match = rowPattern.exec(text)) !== null) {
                const name = match[2].trim();
                let score10Str = match[3];
                const gradeLetter = match[4];
                const credits = parseInt(match[5]);

                let score10 = null;
                if (score10Str !== 'DT' && score10Str !== 'MT') {
                    score10 = parseFloat(score10Str);
                }

                courses.push({
                    id: 'ext-' + Math.random().toString(36).substr(2, 9),
                    name,
                    credits,
                    score10,
                    gradeLetter,
                    score4: calculateScore4(score10, gradeLetter),
                    type: 'extracted'
                });
            }
            return courses;
        }

        window.toggleSort = (column) => {
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'desc';
            }
            updateSortIcons();
            updateUI();
        };

        function updateSortIcons() {
            const columns = ['name', 'credits', 'score10', 'score4'];
            columns.forEach(col => {
                const icon = document.getElementById(`icon-${col}`);
                if (currentSort.column === col) {
                    icon.innerText = currentSort.direction === 'asc' ? '▲' : '▼';
                    icon.classList.add('text-blue-600');
                } else {
                    icon.innerText = '↕';
                    icon.classList.remove('text-blue-600');
                }
            });
        }

        function updateField(id, field, value) {
            const updateCourse = (c) => {
                if (c.id === id) {
                    if (field === 'credits') c.credits = parseInt(value) || 0;
                    if (field === 'score10') {
                        c.score10 = value === '' ? null : parseFloat(value);
                        // Chỉ tính lại điểm 4 nếu không phải môn MT/DT (giữ nguyên tính chất môn miễn/đạt)
                        if (c.gradeLetter !== 'MT' && c.gradeLetter !== 'DT') {
                            c.score4 = calculateScore4(c.score10, null);
                            c.gradeLetter = getGradeLetter(c.score10);
                        } else {
                            c.score4 = null; // Môn MT/DT không có điểm 4 số
                        }
                    }
                }
                return c;
            };
            extractedCourses = extractedCourses.map(updateCourse);
            manualCourses = manualCourses.map(updateCourse);
            updateUI(false); 
        }

        function updateUI(resetSelections = true) {
            let allCourses = [...extractedCourses, ...manualCourses];
            const resultBody = document.getElementById('resultBody');
            
            if (resetSelections) {
                selectedIds.clear();
                document.getElementById('selectAll').checked = false;
            }

            // Sắp xếp
            if (currentSort.column) {
                allCourses.sort((a, b) => {
                    let valA = a[currentSort.column];
                    let valB = b[currentSort.column];
                    const isAInvalid = (currentSort.column.includes('score') && (valA === null || valA > 10));
                    const isBInvalid = (currentSort.column.includes('score') && (valB === null || valB > 10));
                    if (isAInvalid && !isBInvalid) return 1;
                    if (!isAInvalid && isBInvalid) return -1;
                    if (isAInvalid && isBInvalid) return 0;
                    if (typeof valA === 'string') {
                        return currentSort.direction === 'asc' ? valA.localeCompare(valB) : valB.localeCompare(valA);
                    } else {
                        return currentSort.direction === 'asc' ? valA - valB : valB - valA;
                    }
                });
            }

            resultBody.innerHTML = '';

            if (allCourses.length === 0) {
                resultBody.innerHTML = `<tr><td colspan="6" class="px-6 py-12 text-center text-slate-400 italic text-sm">Chưa có dữ liệu học tập</td></tr>`;
                ['totalEarned', 'totalCreditsGPA', 'gpa4', 'gpa10'].forEach(id => document.getElementById(id).innerText = (id.includes('gpa') ? '0.00' : '0'));
                updateBulkActionVisibility();
                return;
            }

            let totalEarnedCredits = 0;
            let totalGPACredits = 0;
            let sumWeighted4 = 0;
            let sumWeighted10 = 0;

            allCourses.forEach(c => {
                if (c.credits >= 0 && c.gradeLetter !== 'F') totalEarnedCredits += c.credits;
                const isGPAEligible = c.credits > 0 && c.gradeLetter !== 'MT' && c.gradeLetter !== 'DT' && c.score4 !== null && (c.score10 === null || c.score10 <= 10);
                if (isGPAEligible) {
                    totalGPACredits += c.credits;
                    sumWeighted4 += (c.score4 * c.credits);
                    if (c.score10 !== null) sumWeighted10 += (c.score10 * c.credits);
                }

                const row = document.createElement('tr');
                const isManual = c.type === 'manual';
                const isScoreWarning = c.score10 > 10;
                row.className = isManual ? "bg-emerald-50/40" : (isGPAEligible ? "hover:bg-slate-50 transition-colors" : "bg-slate-50/70 opacity-70");
                
                const checkboxHtml = `<input type="checkbox" class="row-checkbox rounded border-slate-300 text-blue-600" data-id="${c.id}" ${selectedIds.has(c.id) ? 'checked' : ''}>`;
                
                const creditsCell = isEditMode ? 
                    `<input type="number" class="w-12 p-1 border rounded text-center" value="${c.credits}" onchange="updateField('${c.id}', 'credits', this.value)">` : 
                    c.credits;

                const score10Cell = isEditMode && (c.gradeLetter !== 'MT' && c.gradeLetter !== 'DT') ? 
                    `<input type="number" step="0.1" class="w-16 p-1 border rounded text-center" value="${c.score10 ?? ''}" onchange="updateField('${c.id}', 'score10', this.value)">` : 
                    `${c.score10 !== null ? c.score10.toFixed(1) : (c.gradeLetter || '-')}${isScoreWarning ? '*' : ''}`;

                row.innerHTML = `
                    <td class="px-4 py-3 text-center">${checkboxHtml}</td>
                    <td class="px-4 py-3">
                        <div class="font-medium ${isManual ? 'text-emerald-700' : 'text-slate-700'} truncate max-w-[200px]" title="${c.name}">${c.name}</div>
                        <div class="text-[9px] uppercase font-bold text-slate-400 tracking-tighter">${isManual ? 'Dự kiến' : 'Chính thức'}</div>
                    </td>
                    <td class="px-2 py-3 text-center text-slate-600 font-medium">${creditsCell}</td>
                    <td class="px-2 py-3 text-center font-semibold ${isScoreWarning ? 'text-red-400' : ''}">${score10Cell}</td>
                    <td class="px-2 py-3 text-center font-bold text-blue-600">${c.score4 !== null ? c.score4.toFixed(1) : '-'}</td>
                    <td class="px-4 py-3 text-center">
                        <button onclick="deleteCourse('${c.id}', '${c.type}')" class="p-1.5 text-slate-300 hover:text-red-500 transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                        </button>
                    </td>
                `;
                resultBody.appendChild(row);
            });

            document.getElementById('totalEarned').innerText = totalEarnedCredits;
            document.getElementById('totalCreditsGPA').innerText = totalGPACredits;
            document.getElementById('gpa4').innerText = (totalGPACredits > 0 ? (sumWeighted4 / totalGPACredits) : 0).toFixed(2);
            document.getElementById('gpa10').innerText = (totalGPACredits > 0 ? (sumWeighted10 / totalGPACredits) : 0).toFixed(2);
            
            bindCheckboxes();
            updateBulkActionVisibility();
        }

        function bindCheckboxes() {
            document.querySelectorAll('.row-checkbox').forEach(cb => {
                cb.addEventListener('change', (e) => {
                    const id = e.target.dataset.id;
                    if (e.target.checked) selectedIds.add(id);
                    else {
                        selectedIds.delete(id);
                        document.getElementById('selectAll').checked = false;
                    }
                    updateBulkActionVisibility();
                });
            });
        }

        function updateBulkActionVisibility() {
            const bulkActions = document.getElementById('bulkActions');
            const countEl = document.getElementById('selectedCount');
            if (selectedIds.size > 0) {
                bulkActions.classList.remove('invisible');
                countEl.innerText = selectedIds.size;
            } else {
                bulkActions.classList.add('invisible');
            }
        }

        // Export to CSV
        function exportToCSV() {
            const allCourses = [...extractedCourses, ...manualCourses];
            if (allCourses.length === 0) return;
            let csvContent = "\ufeffLoai,Ten Mon Hoc,Tin Chi,Diem He 10,Diem He 4\n";
            allCourses.forEach(c => {
                const type = c.type === 'manual' ? "Du kien" : "Chinh thuc";
                const s10 = c.score10 !== null ? c.score10 : (c.gradeLetter || "-");
                const s4 = c.score4 !== null ? c.score4 : "-";
                csvContent += `"${type}","${c.name.replace(/"/g, '""')}",${c.credits},"${s10}",${s4}\n`;
            });
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = `GPA_Export_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        // Event Listeners
        document.getElementById('btnProcess').addEventListener('click', () => {
            const text = document.getElementById('rawInput').value;
            if (!text) return;
            
            // RESET: Làm sạch danh sách trước khi thêm mới
            extractedCourses = parseMyBKData(text);
            manualCourses = []; // Xóa luôn cả các môn dự tính nếu muốn reset hoàn toàn
            
            selectedIds.clear();
            updateUI();
        });

        document.getElementById('btnAddManual').addEventListener('click', () => {
            let name = document.getElementById('manualName').value.trim() || `temp${tempCounter++}`;
            const credits = parseInt(document.getElementById('manualCredits').value);
            const score = parseFloat(document.getElementById('manualScore').value);
            if (isNaN(credits) || isNaN(score)) return;

            manualCourses.push({
                id: 'man-' + Date.now(),
                name, credits, score10: score,
                gradeLetter: getGradeLetter(score),
                score4: calculateScore4(score, null),
                type: 'manual'
            });
            updateUI();
            ['manualName', 'manualCredits', 'manualScore'].forEach(id => document.getElementById(id).value = '');
        });

        document.getElementById('toggleEdit').addEventListener('change', (e) => {
            isEditMode = e.target.checked;
            updateUI(false);
        });

        document.getElementById('selectAll').addEventListener('change', (e) => {
            const allIds = [...extractedCourses, ...manualCourses].map(c => c.id);
            if (e.target.checked) allIds.forEach(id => selectedIds.add(id));
            else selectedIds.clear();
            updateUI(false);
        });

        document.getElementById('btnDeleteSelected').addEventListener('click', () => {
            extractedCourses = extractedCourses.filter(c => !selectedIds.has(c.id));
            manualCourses = manualCourses.filter(c => !selectedIds.has(c.id));
            selectedIds.clear();
            updateUI();
        });

        window.deleteCourse = (id, type) => {
            if (type === 'manual') manualCourses = manualCourses.filter(c => c.id !== id);
            else extractedCourses = extractedCourses.filter(c => c.id !== id);
            selectedIds.delete(id);
            updateUI(false);
        };

        document.getElementById('btnClearRaw').addEventListener('click', () => {
            document.getElementById('rawInput').value = '';
        });

        document.getElementById('btnExportCSV').addEventListener('click', exportToCSV);

    </script>
    <script>
        // --- Header Scroll Effect Logic ---
        const header = document.getElementById('mainHeader');
        
        // Hàm xử lý sự kiện cuộn
        const handleScroll = () => {
            if (window.scrollY > 10) {
                // TRẠNG THÁI: Đã cuộn xuống
                // 1. Xóa hiệu ứng kính mờ và viền xám nhẹ
                header.classList.remove('glass-morphism', 'border-slate-200');
                
                // 2. Thêm nền trắng đặc và đổ bóng đậm hơn
                header.classList.add('bg-white', 'shadow-md');
            } else {
                // TRẠNG THÁI: Ở đầu trang
                // 1. Trả lại hiệu ứng kính mờ và viền
                header.classList.add('glass-morphism', 'border-slate-200');
                
                // 2. Xóa nền trắng đặc và bóng đậm
                header.classList.remove('bg-white', 'shadow-md');
            }
        };

        // Lắng nghe sự kiện scroll
        window.addEventListener('scroll', handleScroll);
    </script>
    </main>

    <div id="footer-placeholder"></div>
    <script src="load-components.js"></script>
</body>
</html>